!function(o){var i={width:400,height:"65%",minimizedWidth:200,gutter:10,poppedOutDistance:"6%",title:"",dialogClass:"",buttons:[],animationSpeed:400,opacity:1,initialState:"modal",showClose:!0,showPopout:!0,showMinimize:!0,create:void 0,open:void 0,beforeClose:void 0,close:void 0,beforeMinimize:void 0,minimize:void 0,beforeRestore:void 0,restore:void 0,beforePopout:void 0,popout:void 0},t="dockmodal";o(window).width();function e(o,i){var t=o.options.animationSpeed/1e3;return i.css({transition:t+"s right, "+t+"s left, "+t+"s top, "+t+"s bottom, "+t+"s height, "+t+"s width"}),!0}var s={init:function(a){return this.each(function(){var n=o(this),d=n.data("dockmodal");if(n.options=o.extend({},i,a),d)return o("body").append(n.closest("."+t).show()),s.refreshLayout(),void setTimeout(function(){s.restore.apply(n)},n.options.animationSpeed);n.data("dockmodal",n);var p=o("body"),r=o(window),l=o("<div/>").addClass(t).addClass(n.options.dialogClass);"modal"==n.options.initialState?l.addClass("popped-out"):"minimized"==n.options.initialState&&l.addClass("minimized"),l.height(0),e(n,l);var c=o("<div></div>").addClass(t+"-header");n.options.showClose&&o('<a href="#" class="header-action action-close" title="Close"><i class="icon-dockmodal-close"></i></a>').appendTo(c).click(function(o){return s.destroy.apply(n),!1}),n.options.showPopout&&o('<a href="#" class="header-action action-popout" title="Pop out"><i class="icon-dockmodal-popout"></i></a>').appendTo(c).click(function(o){return l.hasClass("popped-out")?s.restore.apply(n):s.popout.apply(n),!1}),n.options.showMinimize&&o('<a href="#" class="header-action action-minimize" title="Minimize"><i class="icon-dockmodal-minimize"></i></a>').appendTo(c).click(function(o){return l.hasClass("minimized")?l.hasClass("popped-out")?s.popout.apply(n):s.restore.apply(n):s.minimize.apply(n),!1}),n.options.showMinimize&&n.options.showPopout&&c.click(function(){return l.hasClass("minimized")?l.hasClass("popped-out")?s.popout.apply(n):s.restore.apply(n):s.minimize.apply(n),!1}),c.append('<div class="title-text">'+(n.options.title||n.attr("title"))+"</div>"),l.append(c);var h=o('<div class="modal-placeholder"></div>').insertAfter(n);n.placeholder=h;var u=o("<div></div>").addClass(t+"-body").append(n);if(l.append(u),n.options.buttons.length){var m=o("<div></div>").addClass(t+"-footer"),f=o("<div></div>").addClass(t+"-footer-buttonset");m.append(f),o.each(n.options.buttons,function(i,t){var e=o('<a href="#" class="btn"></a>');e.attr({id:t.id,class:t.buttonClass}),e.html(t.html),e.click(function(o){return t.click(o,n),!1}),f.append(e)}),l.append(m)}else l.addClass("no-footer");var v=o(".dockmodal-overlay");v.length||(v=o("<div/>").addClass(t+"-overlay")),o.isFunction(n.options.create)&&n.options.create(n),p.append(l),l.after(v),u.focus(),o.isFunction(n.options.open)&&setTimeout(function(){n.options.open(n)},n.options.animationSpeed),l.hasClass("minimized")?(l.find(".dockmodal-body, .dockmodal-footer").hide(),s.minimize.apply(n)):l.hasClass("popped-out")?s.popout.apply(n):s.restore.apply(n),p.data("windowWidth",r.width()),r.unbind("resize.dockmodal").bind("resize.dockmodal",function(){r.width()!=p.data("windowWidth")&&(p.data("windowWidth",r.width()),s.refreshLayout())})})},destroy:function(){return this.each(function(){var i=o(this).data("dockmodal");if(i&&(!o.isFunction(i.options.beforeClose)||!1!==i.options.beforeClose(i)))try{var e=i.closest("."+t);e.hasClass("popped-out")&&!e.hasClass("minimized")?e.css({left:"50%",right:"50%",top:"50%",bottom:"50%"}):e.css({width:"0",height:"0"}),setTimeout(function(){i.removeData("dockmodal"),i.placeholder.replaceWith(i),e.remove(),o(".dockmodal-overlay").hide(),s.refreshLayout(),o.isFunction(i.options.close)&&i.options.close(i)},i.options.animationSpeed)}catch(o){alert(o.message)}})},close:function(){s.destroy.apply(this)},minimize:function(){return this.each(function(){var i=o(this).data("dockmodal");if(i&&(!o.isFunction(i.options.beforeMinimize)||!1!==i.options.beforeMinimize(i))){var e=i.closest("."+t),a=e.find(".dockmodal-header").outerHeight();e.addClass("minimized").css({width:i.options.minimizedWidth+"px",height:a+"px",left:"auto",right:"auto",top:"auto",bottom:"0"}),setTimeout(function(){e.find(".dockmodal-body, .dockmodal-footer").hide(),o.isFunction(i.options.minimize)&&i.options.minimize(i)},i.options.animationSpeed),o(".dockmodal-overlay").hide(),e.find(".action-minimize").attr("title","Restore"),s.refreshLayout()}})},restore:function(){return this.each(function(){var i=o(this).data("dockmodal");if(i&&(!o.isFunction(i.options.beforeRestore)||!1!==i.options.beforeRestore(i))){var e=i.closest("."+t);e.removeClass("minimized popped-out"),e.find(".dockmodal-body, .dockmodal-footer").show(),e.css({width:i.options.width+"px",height:i.options.height,left:"auto",right:"auto",top:"auto",bottom:"0"}),o(".dockmodal-overlay").hide(),e.find(".action-minimize").attr("title","Minimize"),e.find(".action-popout").attr("title","Pop-out"),setTimeout(function(){o.isFunction(i.options.restore)&&i.options.restore(i)},i.options.animationSpeed),s.refreshLayout()}})},popout:function(){return this.each(function(){var i=o(this).data("dockmodal");if(i&&(!o.isFunction(i.options.beforePopout)||!1!==i.options.beforePopout(i))){var a=i.closest("."+t);a.find(".dockmodal-body, .dockmodal-footer").show(),a.css({transition:"none"});var n=a.position(),d=o(window).width();a.css({width:"auto",height:"auto",left:n.left+"px",right:d-n.left-a.outerWidth(!0)+"px",top:n.top+"px",bottom:0}),e(i,a),setTimeout(function(){a.removeClass("minimized").addClass("popped-out").css({width:"auto",height:"auto",left:i.options.poppedOutDistance,right:i.options.poppedOutDistance,top:i.options.poppedOutDistance,bottom:i.options.poppedOutDistance}),o(".dockmodal-overlay").show(),a.find(".action-popout").attr("title","Pop-in"),s.refreshLayout()},10),setTimeout(function(){o.isFunction(i.options.popout)&&i.options.popout(i)},i.options.animationSpeed)}})},refreshLayout:function(){var i=0,e=o(window).width();o.each(o("."+t).toArray().reverse(),function(t,s){var a=o(this),n=a.find(".dockmodal-body > div").data("dockmodal");a.hasClass("popped-out")&&!a.hasClass("minimized")||(i+=n.options.gutter,a.css({right:i+"px"}),a.hasClass("minimized")?i+=n.options.minimizedWidth:i+=n.options.width,i>e?a.hide():setTimeout(function(){a.show()},n.options.animationSpeed))})}};o.fn.dockmodal=function(i){return s[i]?s[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void o.error("Method "+i+" does not exist on jQuery.dockmodal"):s.init.apply(this,arguments)}}(jQuery);